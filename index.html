<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CheerpX Browser VM</title>
<script src="https://cdn.jsdelivr.net/npm/@leaningtech/cheerpx@1.0.0/dist/cheerpx.min.js"></script>
<style>
  body { font-family: monospace; background: #111; color: #0f0; margin: 0; }
  #console { padding: 10px; height: 80vh; overflow-y: scroll; white-space: pre-wrap; background: #000; }
  button { margin: 10px; padding: 8px 16px; }
</style>
</head>
<body>

<h2>CheerpX Browser VM</h2>
<button id="start">Start VM</button>
<pre id="console">Press "Start VM" to launch the VM...</pre>

<script>
document.getElementById("start").addEventListener("click", async () => {
    const consoleEl = document.getElementById("console");
    consoleEl.textContent = "Initializing VM...\n";

    const cx = new CheerpX();
    await cx.initialize();

    cx.setConsole(consoleEl);

    consoleEl.textContent += "VM ready!\n";

    // Launch bash shell
    await cx.run("/bin/bash", ["--login"], {
        env: [
            "HOME=/home/user",
            "USER=user",
            "SHELL=/bin/bash",
            "EDITOR=vim",
        ],
    });
});
</script>

</body>
</html>
